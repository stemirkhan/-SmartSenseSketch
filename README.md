# SmartSenseSketch

## Содержание

[Описание](#description)   
[Принцип работы](#working_principle)  
[Настройка и прошивка](#setup)   
[Полезные ссылки](#useful_links)

---

## Описание
<a name="description"></a>

Этот репозиторий является частью проекта SmartSense. Тут представлен скетч для прошивки платы esp8266 nodemcu v3.

Датчики BMP280 и AHT10 (на картинке AHT20) подключены к пинам D1 и D2 по интерфейсу I2C. Датчик угарного газа MQ-7 подключен к аналогову пину A0. Зумер в свою очередь подключен к пину D7. Схема подлючения датчиков и зумера к плате:

![connection diagram](./media/connection-layout.png)

---

## Принцип работы
<a name="working_principle"></a> 

Задача данной сборки заключается в получение данных с датчиков и их отпрвку на сервер для последующей записи в базу данных.

Сбор показаний с датчиков происходит каждые две секунды. Каждый раз при получения показаний с датчиков они отпраляются на сервер по протоколу HTTPS. Так же происходит проверка на превышение уровня угарного газа, если данный уровен превышает допустимое значения, то активиззируется зумер. Зуммер будет издавать звук каждые 100 миллисекунд пока значение уграного газа не придет в норму.

Показания температуры и атмосферного давления снимаются с датчика BMP280, значение влажности береться с датчика AHT10, значение уграного газа с датчика MQ-7.

---

## Настройка и прошивка
<a name="setup"></a> 

Основные настройки стекча представлены константными переменными в начале кода:

```
const char* ssid = "<название WI-FI сети>";
const char* password = "пароль от WI-FI сети";
const char* server_host = "ip-адрес сервера для отправки данных";
const char* server_port = "порт сервера для отпраки данных";
const char* access_token = "токен доступа для проверки подленности";
```

Значение access_token проверятеся на строне сервера. Токен можно создать на странице админестратора сайта.

---

## Cсылки
<a name="useful_links"></a>
- Data sheet на датчик [BMP280](https://www.sparkfun.com/datasheets/Sensors/Biometric/MQ-7.pdf)
- Data sheet на датчик [AHT10](https://cxemka.com/upload/art/aht10/d/aht10_datasheet_temperature_humidity_sensor_%28EN%29.pdf)
- Data sheet на датчик [MQ-7](https://amperkot.ru/static/3236/uploads/datasheets/BST-BMP280.pdf)